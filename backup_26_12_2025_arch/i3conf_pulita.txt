# ==========================
#   i3 CONFIG (FINAL CLEAN)
# ==========================


#mouse logitech m575s
exec_always --no-startup-id /home/piadi/___script_vari_di_i3___/bash_scripts/logi_mouse_m575s.sh 

# Disattiva lo spegnimento automatico dello schermo
exec_always --no-startup-id xset -dpms
exec_always --no-startup-id xset s off
exec_always --no-startup-id xset s noblank

# Mod key & font
set $mod Mod4
font pango:JetBrainsMono Nerd Font Mono 10
# font pango:Iosevka Nerd Font Mono 10
# font pango:DepartureMono Nerd Font Mono


# Startup applications (only if not running)
exec --no-startup-id dex --autostart --environment i3


#autotiling
exec_always --no-startup-id autotiling


#barrra:
exec_always --no-startup-id sh -c "sleep 2 && /home/piadi/___script_vari_di_i3___/polybar/launch.sh"

# Avvia picom per trasparenze e blur
# exec_always --no-startup-id picom --config ~/.config/picom/picom.conf

exec --no-startup-id pgrep -x libinput-gestures >/dev/null || libinput-gestures-setup start
exec --no-startup-id xinput --set-prop 13 "libinput Accel Speed" 0.2
exec --no-startup-id pgrep -x polkit-gnome-authentication-agent-1 >/dev/null || /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec --no-startup-id sudo modprobe asus-nb-wmi
exec --no-startup-id bash -c 'pgrep -x hiddify >/dev/null || (i3-msg workspace 5; sleep 1; sudo /sbin/hiddify &)'


#layout tastiera
# exec_always --no-startup-id bash -c "sleep 3 && setxkbmap -layout it"
# exec_always --no-startup-id bash -c "sleep 3 && setxkbmap -layout it,us -variant ,intl -option grp:alt_shift_toggle"
exec_always --no-startup-id bash -c "sleep 3 && setxkbmap -layout us -variant intl"

#bind a capslock esc per vim
exec --no-startup-id setxkbmap -option caps:escape



#wallpaper
exec_always --no-startup-id wal -i /home/piadi/wallpaper/budapes.png


#layout 
exec_always --no-startup-id setxkbmap -layout us,ir -option 'grp:alt_shift_toggle'

#165hz
exec --no-startup-id xrandr --output DP-2 --mode 1920x1080 --rate 165


# Floating modifier
floating_modifier $mod


#mie reobre/scripts e cose del genere
bindsym $mod+Shift+slash exec --no-startup-id /home/piadi/___script_vari_di_i3___/bash_scripts/rofi_bluetooth.sh


# audio output
bindsym $mod+Shift+o exec --no-startup-id /home/piadi/___script_vari_di_i3___/bash_scripts/toggle-audio.sh

#notifiche
exec --no-startup-id dunst

# #audio tasti
bindsym $mod+z exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10%
bindsym $mod+x exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10%

# Launch apps
bindsym $mod+Return exec kitty

bindsym $mod+q kill
bindsym $mod+d exec --no-startup-id rofi -show drun -dpi 130
bindsym $mod+slash exec --no-startup-id /home/piadi/___script_vari_di_i3___/bash_scripts/wifimenu.sh
bindsym $mod+t exec --no-startup-id flameshot gui

# Power Menu con Rofi
bindsym $mod+p exec ~/.config/rofi/powermenu.sh




#browser
bindsym $mod+o exec --no-startup-id firefox
#brave-browser

# bindsym $mod+z exec --no-startup-id code
bindsym $mod+g exec --no-startup-id nautilus

# Navigation (Vim + Arrow keys)
bindsym $mod+j focus left
bindsym $mod+k focus down
bindsym $mod+l focus up
bindsym $mod+semicolon focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Move windows
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Move windows between monitors (avoid duplicate keys)
bindsym $mod+Ctrl+Shift+k move container to output DP-1
bindsym $mod+Ctrl+Shift+l move container to output HDMI-1

# Layout controls
bindsym $mod+h split h
bindsym $mod+v split v
bindsym $mod+f fullscreen toggle
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split
bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle
bindsym $mod+a focus parent

# Workspaces
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10

# Restart/Reload/Exit
bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart
bindsym $mod+Shift+e exec "i3-nagbar -t warning -f 'pango:DepartureMono Nerd Font Mono 17' -m 'You are about to exit i3' -b 'Yes, exit i3' 'i3-msg exit'"

# Resize mode
mode "resize" {
    bindsym j resize shrink width 10 px or 10 ppt
    bindsym k resize grow height 10 px or 10 ppt
    bindsym l resize shrink height 10 px or 10 ppt
    bindsym semicolon resize grow width 10 px or 10 ppt
    bindsym Left resize shrink width 10 px or 10 ppt
    bindsym Down resize grow height 10 px or 10 ppt
    bindsym Up resize shrink height 10 px or 10 ppt
    bindsym Right resize grow width 10 px or 10 ppt
    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym $mod+r mode "default"
}
bindsym $mod+r mode "resize"

# Window rules
for_window [class="Hiddify"] floating enable, resize set 800 600, move position center, move to workspace number 5
for_window [class="AyuGramDesktop"] floating enable, resize set 800 930, move position center

#Borders & Colors
#prima
default_border pixel

#dopo
# default_border pixel
# default_floating_border pixel


gaps inner 4
gaps outer 4

set_from_resource $fg i3wm.color7 #f0f0f0
set_from_resource $bg i3wm.color2 #2e3440

#colori per fare funzionare piwal
# client.focused          #88c0d0 $bg     $fg  #88c0d0 $bg
# client.focused_inactive $bg     $bg     $fg  $bg     $bg
# client.unfocused        $bg     $bg     $fg  $bg     $bg
# client.urgent           #bf616a $bg     $fg  #bf616a $bg
# client.placeholder      $bg     $bg     $fg  $bg     $bg
# client.background       $bg

client.focused          $bg     $bg     $fg  $bg     $bg
client.focused_inactive $bg     $bg     $fg  $bg     $bg
client.unfocused        $bg     $bg     $fg  $bg     $bg
client.urgent           $bg     $bg     $fg  $bg     $bg
client.placeholder      $bg     $bg     $fg  $bg     $bg
client.background       $bg


